# Makefile for mesh generation

# The MeshVariables file is generated by running make meshes in DPG_ROOT and includes both the definition of several
# variables used below (collection of .msh files) as well as their dependencies on associated .geo files.
include MeshVariables

# Make targets:
#
# Simply running make does not properly execute the default rule (i.e. 'make meshes_all' must be used instead of 'make')
#
# meshes_all      : generate all meshes
# meshes_update_h : generates meshes for the update_h integration tests 


PYTHONC   := python3
PYTHONDIR := ../python/

SOURCE := generate_meshes.py




.PHONY : meshes_all
.PHONY : meshes_update_h

SHELL := /bin/bash

# Default goal
meshes_all:
	$(MAKE) meshes_update_h

meshes_update_h : $(UPDATE_H)



$(UPDATE_H) :
	cd $(PYTHONDIR) && $(PYTHONC) $(SOURCE) update_h $@
